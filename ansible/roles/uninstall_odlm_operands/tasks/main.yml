---

- name: Remove the OperandConfig
  kubernetes.core.k8s:
    api_key: "{{ api_key | default(omit) }}"
    api_version: operator.ibm.com/v1alpha1
    kind: OperandConfig
    kubeconfig: "{{ kubeconfig_path }}"
    name: "{{ common_service_operand_name }}"
    namespace: "{{ target_namespace }}"
    state: absent
    wait: true
  register: _result
  failed_when: false

- name: Remove the OperandRegistry
  kubernetes.core.k8s:
    api_key: "{{ api_key | default(omit) }}"
    api_version: operator.ibm.com/v1alpha1
    kind: OperandRegistry
    kubeconfig: "{{ kubeconfig_path }}"
    name: "{{ common_service_operand_name }}"
    namespace: "{{ target_namespace }}"
    state: absent
    wait: true
  register: _result
  failed_when: false
