---

- name: Gather network facts
  ansible.builtin.gather_facts:
    gather_subset: "!all,network"

- name: Clear ansible_facts
  set_fact:
    ansible_facts: {}

- name: Set derived localhost facts
  set_fact:
    cpu_arch: "{{ 'amd64' if (ansible_architecture == 'x86_64') else ansible_architecture }}"
    os_family: "{{ 'mac' if (ansible_os_family == 'Darwin') else ('windows' if (ansible_os_family == 'Windows') else 'linux') }}"
    local_path: "{{ ansible_env['PATH'] }}"
