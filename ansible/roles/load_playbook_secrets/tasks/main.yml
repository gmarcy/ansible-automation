---

- name: Load all playbook secrets
  include_vars:
    dir: "{{ secrets_vars_dir }}"
    ignore_unknown_extensions: true
  no_log: "{{ hide_playbook_secrets | default(true) }}"
  delegate_to: "{{ inventory_hostname }}"
  delegate_facts: true

- name: Show playbook secrets if requested
  debug: var=hostvars['playbook-secrets']
  when: show_playbook_secrets | default(false)

- fail: msg=stopping
  when: show_playbook_secrets | default(false)
