---

- name: Create cluster_dir folder
  file:
    path: "{{ cluster_dir }}"
    state: directory
  delegate_to: 'cluster-facts'

- name: Fetch a copy of the kubeconfig for localhost
  fetch:
    src: auth/kubeconfig
    dest: "{{ cluster_dir + '/kubeconfig' }}"
    flat: true

- name: Set cluster_facts
  set_fact:
    console_url: "{{ hostvars[inventory_hostname]['ocp_access_url'] }}"
    console_username: "{{ hostvars[inventory_hostname]['kubeadmin_username'] }}"
    console_password: "{{ hostvars[inventory_hostname]['kubeadmin_password'] }}"
  no_log: "{{ noLog }}"
  delegate_to: 'cluster-facts'
  delegate_facts: true
