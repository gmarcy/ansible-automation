---

- name: Create fyre_provisioner localhost group for this play
  hosts: localhost
  gather_facts: false
  tags: request_devenv_fyre
  roles:
  - role: create_localhost_groups
    localhost_groups:
    - host_name: fyre-provisioner
      group_name: fyre_provisioner

- name: Create devenv machine
  hosts: fyre_provisioner
  gather_facts: false
  tags: request_devenv_fyre
  roles:
  - role: devenv_fyrevm

- name: Fix incorrect state on devenv host
  hosts: devenv
  gather_facts: false
  tags: request_devenv_fyre
  vars:
  - ansible_user: root
  roles:
  - role: fix_fyre_hosts_file
  - role: fix_fyre_user_group
