---

- name: Create assisted_install localhost group for this play
  hosts: localhost
  gather_facts: false
  tags: cluster_facts
  roles:
  - role: create_localhost_groups
    localhost_groups:
    - host_name: assisted-install
      group_name: assisted_install

- name: Gather assisted cluster facts
  hosts: assisted_install
  gather_facts: false
  tags: cluster_facts
  roles:
  - role: gather_assisted_cluster_facts
    cluster_name: "{{ hostvars['cluster-facts']['cluster_name'] }}"
  - role: gather_cluster_facts
    cluster_dir: "{{ hostvars['cluster-facts']['cluster_dir'] }}"
    cluster_name: "{{ hostvars['cluster-facts']['cluster_name'] }}"
    cluster_openshift_version: "{{ hostvars['cluster-facts']['openshift_version'] }}"
