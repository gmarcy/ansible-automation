---

- name: Create mongo data folders on all worker nodes
  hosts: worker_nodes
  gather_facts: false
  tags: mongo_setup
  roles:
  - role: cncf_create_mongo_data_folders
    when: hostvars['provision-cluster']['local_storage_required']

- name: Create local storage cluster artifacts
  hosts: setup_storage
  gather_facts: false
  tags: storage_setup
  roles:
  - role: cncf_local_storage
    cluster_name: "{{ hostvars['provision-cluster']['cluster_name'] }}"
    when: hostvars['provision-cluster']['local_storage_required']
